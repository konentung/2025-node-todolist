doctype html
html
  head
    title= title
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    link(rel='icon', type='image/svg+xml', href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="%230d6efd" class="bi bi-check2-square" viewBox="0 0 16 16"><path d="M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z"/><path d="m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"/></svg>')
    link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css', rel='stylesheet')
    link(rel='stylesheet', href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css')
    link(rel='stylesheet', href='/stylesheets/style.css')
  body
    nav.navbar.navbar-expand-lg.navbar-dark.bg-primary
      .container
        a.navbar-brand(href='/') 
          i.bi.bi-check2-square.me-2
          | TodoList
        button.navbar-toggler(type='button', data-bs-toggle='collapse', data-bs-target='#navbarNav')
          span.navbar-toggler-icon
        #navbarNav.collapse.navbar-collapse
          ul.navbar-nav.me-auto
            if isAuthenticated
              li.nav-item
                a.nav-link(href='/todos') 我的待辦事項
              li.nav-item
                a.nav-link(href='/todos/new') 新增待辦事項
          ul.navbar-nav
            if isAuthenticated
              li.nav-item.dropdown
                a.nav-link.dropdown-toggle(href='#', role='button', data-bs-toggle='dropdown')
                  i.bi.bi-person-circle.me-1
                  | #{user.username}
                ul.dropdown-menu
                  li
                    a.dropdown-item(href='/auth/logout')
                      i.bi.bi-box-arrow-right.me-2
                      | 登出
            else
              li.nav-item
                a.nav-link(href='/auth/login') 登入
              li.nav-item
                a.nav-link(href='/auth/register') 註冊

    .container.mt-4
      block content

    // Toast 容器
    .toast-container.position-fixed.bottom-0.end-0.p-3(style='z-index: 1055;')
      if error
        #errorToast.toast.show(role='alert', aria-live='assertive', aria-atomic='true')
          .toast-header.bg-danger.text-white
            i.bi.bi-exclamation-triangle.me-2
            strong.me-auto 錯誤
            button.btn-close.btn-close-white(type='button', data-bs-dismiss='toast')
          .toast-body
            | #{error}

    script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js')
    script(src='/javascripts/app.js')
